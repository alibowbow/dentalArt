const box = new THREE.Box3().setFromObject(particles);
const center = box.getCenter(new THREE.Vector3());
const size = box.getSize(new THREE.Vector3());

const maxDim = Math.max(size.x, size.y, size.z);
const fov = camera.fov * (Math.PI / 180);
let cameraZ = Math.abs(maxDim / 2 / Math.tan(fov / 2));

cameraZ *= 1.2; // 약간의 여백 추가

gsap.to(camera.position, {
    duration: 1,
    x: center.x,
    y: center.y,
    z: center.z + cameraZ,
    onUpdate: () => controls.update(),
    onComplete: () => {
        controls.target.copy(center);
        controls.update();
    }
});
